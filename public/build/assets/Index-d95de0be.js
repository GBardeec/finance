import{_ as u,j as h,c as a,d as s,F as p,e as f,g as _,h as c,v as m,w as g,o as l,t as x}from"./app-bc0ea344.js";const v={name:"IndexAuth",data(){return{auth:!1,login:null,password:null,errors:[]}},methods:{postAuth(){axios.post("/api/login",{login:this.login,password:this.password}).then(e=>{localStorage.setItem("token",e.data.token),axios.defaults.headers.common.Authorization=`Bearer ${e.data.token}`,e.data.success&&(this.auth=!0,this.$emit("authenticated",e.data.token),h.push({name:"finance.index"}))}).catch(e=>{if(this.errors=[],e.response&&e.response.data&&e.response.data.errors){const t=e.response.data.errors;for(const r in t)if(t.hasOwnProperty(r)){const i="Ошибка: "+t[r];this.errors.push(i)}}else this.errors.push("Ошибка: "+e.message)})}}},b={class:"container"},w={class:"container d-flex justify-content-center align-items-center",style:{height:"90vh"}},y={class:"w-50"},k=s("div",{class:"text-center mb-3"},[s("h1",null,"Регистрация/Авторизация")],-1),A={key:0,class:"alert alert-danger"},B={class:"form-floating mb-4"},V=s("label",{class:"form-label",for:"loginName"},"Логин",-1),E={class:"form-floating mb-4"},I=s("label",{class:"form-label",for:"loginPassword"},"Пароль",-1),M=s("small",{id:"emailHelp",class:"form-text text-muted"},"*Если у вас отсутствует аккаунт - он будет автоматически создан",-1),N=s("br",null,null,-1),j=s("small",{id:"emailHelp",class:"form-text text-muted"},"**Если Вы уже были на сайте - введите тот же самый логин и пароль",-1),z={class:"d-grid gap-2 col-6 mx-auto"};function C(e,t,r,i,n,d){return l(),a("div",b,[s("main",null,[s("div",w,[s("div",y,[k,n.errors&&n.errors.length>0?(l(),a("div",A,[(l(!0),a(p,null,f(n.errors,o=>(l(),a("p",{key:o,class:"m-0"},x(o),1))),128))])):_("",!0),s("div",B,[c(s("input",{type:"email",id:"login","onUpdate:modelValue":t[0]||(t[0]=o=>n.login=o),class:"form-control",placeholder:"Email"},null,512),[[m,n.login]]),V]),s("div",E,[c(s("input",{type:"password",id:"pass","onUpdate:modelValue":t[1]||(t[1]=o=>n.password=o),class:"form-control mb-2",placeholder:"Пароль"},null,512),[[m,n.password]]),I,M,N,j]),s("div",z,[s("button",{onClick:t[2]||(t[2]=g((...o)=>d.postAuth&&d.postAuth(...o),["prevent"])),class:"btn btn-secondary",style:{"font-size":"1.3em"},type:"submit"},"Войти ")])])])])])}const F=u(v,[["render",C]]);export{F as default};
